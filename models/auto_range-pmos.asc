Version 4
SHEET 1 2772 892
WIRE 1168 -448 1168 -512
WIRE 1328 -448 1328 -512
WIRE 1488 -448 1488 -512
WIRE -304 -320 -304 -512
WIRE 464 -320 -304 -320
WIRE 944 -320 944 -512
WIRE 944 -320 544 -320
WIRE 1168 -304 1168 -368
WIRE 1328 -304 1328 -368
WIRE 1488 -304 1488 -368
WIRE 1904 -208 1904 -272
WIRE 2432 -208 2432 -272
WIRE 1872 -192 1792 -192
WIRE 2400 -192 2352 -192
WIRE 1552 -176 1456 -176
WIRE 2112 -176 1936 -176
WIRE 2624 -176 2464 -176
WIRE 1872 -160 1840 -160
WIRE 2400 -160 2352 -160
WIRE 1392 -144 1168 -144
WIRE 1552 -144 1456 -144
WIRE 1264 -112 1216 -112
WIRE 1392 -112 1264 -112
WIRE 1536 -112 1456 -112
WIRE 1568 -112 1536 -112
WIRE 1904 -96 1904 -144
WIRE 2432 -96 2432 -144
WIRE -304 -64 -304 -320
WIRE 80 -64 -304 -64
WIRE 208 -64 80 -64
WIRE 464 -64 304 -64
WIRE 944 -64 944 -320
WIRE 944 -64 544 -64
WIRE 1536 -64 1536 -112
WIRE 1840 -64 1840 -160
WIRE 1840 -64 1536 -64
WIRE 2352 -64 2352 -160
WIRE 2352 -64 1840 -64
WIRE -16 -16 -96 -16
WIRE 80 -16 80 -64
WIRE 1264 -16 1264 -48
WIRE -16 0 -16 -16
WIRE 32 0 -16 0
WIRE 32 48 -16 48
WIRE -16 64 -16 48
WIRE -16 64 -96 64
WIRE 80 80 80 64
WIRE 224 80 224 -16
WIRE 224 80 80 80
WIRE 224 96 224 80
WIRE 224 208 224 176
WIRE -304 336 -304 -64
WIRE 96 336 -304 336
WIRE 224 336 96 336
WIRE 464 336 320 336
WIRE 944 336 944 -64
WIRE 944 336 544 336
WIRE 0 400 -96 400
WIRE 96 400 96 336
WIRE 0 416 0 400
WIRE 48 416 0 416
WIRE 48 464 0 464
WIRE 0 480 0 464
WIRE 0 480 -96 480
WIRE 240 480 240 384
WIRE 240 480 96 480
WIRE -304 528 -304 336
WIRE 240 544 240 480
WIRE 944 560 944 336
WIRE -304 656 -304 608
WIRE 240 656 240 624
WIRE 944 656 944 624
FLAG 1168 -304 0
FLAG 1168 -144 0
FLAG 1264 -16 0
FLAG -304 -512 ADin1
IOPIN -304 -512 Out
FLAG 944 -512 ADin2
IOPIN 944 -512 Out
FLAG 1552 -176 ADin1
IOPIN 1552 -176 In
FLAG 1552 -144 ADin2
IOPIN 1552 -144 In
FLAG 1168 -512 V3.3
IOPIN 1168 -512 Out
FLAG 1216 -112 V3.3
IOPIN 1216 -112 Out
FLAG 1568 -112 ADout
IOPIN 1568 -112 Out
FLAG 944 656 0
FLAG 240 656 0
FLAG 224 208 0
FLAG -304 656 0
FLAG 1328 -512 Vhref
IOPIN 1328 -512 Out
FLAG 1328 -304 0
FLAG 1488 -512 Vlref
IOPIN 1488 -512 Out
FLAG 1488 -304 0
FLAG 1904 -272 V3.3
IOPIN 1904 -272 Out
FLAG 1904 -96 0
FLAG 2432 -272 V3.3
IOPIN 2432 -272 Out
FLAG 1792 -192 Vhref
IOPIN 1792 -192 In
FLAG 2352 -192 Vlref
IOPIN 2352 -192 In
FLAG 2432 -96 0
FLAG 2112 -176 RangeH
IOPIN 2112 -176 Out
FLAG 2624 -176 RangeL
IOPIN 2624 -176 Out
DATAFLAG 512 -352 "V(adin1)-V(adin2)"
DATAFLAG 832 592 "I(R4)"
DATAFLAG 848 560 "V(adin2)"
DATAFLAG 768 -336 "-I(R3)"
DATAFLAG 784 -80 "-I(R1)"
DATAFLAG 784 320 "-I(R2)"
DATAFLAG 496 304 "V(n005)-V(adin2)"
DATAFLAG 512 -96 "V(n001)-V(adin2)"
DATAFLAG 272 304 "V(adin1)-V(n005)"
DATAFLAG 272 -96 "V(adin1)-V(n001)"
DATAFLAG 352 416 "(V(adin1)-V(n005))/-I(R2)"
DATAFLAG 336 16 "(V(adin1)-V(n001))/-I(R1)"
DATAFLAG 320 144 "-I(R5)"
DATAFLAG 320 592 "-I(R6)"
DATAFLAG 1712 -64 ""
DATAFLAG 2016 -176 ""
DATAFLAG 2544 -176 ""
SYMBOL voltage -304 512 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName Vtarget
SYMATTR Value 1.8
SYMBOL pmos 304 -16 M270
WINDOW 0 32 2 VLeft 2
WINDOW 3 34 200 VLeft 2
SYMATTR InstName M1
SYMATTR Value Si4913DY
SYMBOL res 560 -80 R90
WINDOW 0 47 -8 VBottom 2
WINDOW 3 58 54 VTop 2
SYMATTR InstName R1
SYMATTR Value 10
SYMBOL res 560 320 R90
WINDOW 0 44 -9 VBottom 2
WINDOW 3 47 61 VTop 2
SYMATTR InstName R2
SYMATTR Value 1
SYMBOL res 560 -336 R90
WINDOW 0 57 121 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R3
SYMATTR Value 510
SYMBOL res 1040 720 R0
SYMATTR InstName R4
SYMATTR Value 10k
SYMBOL sw 80 80 M180
SYMATTR InstName S1
SYMBOL voltage -96 -32 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V2
SYMATTR Value 0
SYMBOL voltage -96 384 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V3
SYMATTR Value 3.3
SYMBOL sw 96 496 M180
SYMATTR InstName S2
SYMBOL res 240 192 R180
WINDOW 0 45 81 Left 2
WINDOW 3 31 47 Left 2
SYMATTR InstName R5
SYMATTR Value 1Meg
SYMBOL res 256 640 R180
WINDOW 0 37 82 Left 2
WINDOW 3 37 52 Left 2
SYMATTR InstName R6
SYMATTR Value 1Meg
SYMBOL pmos 320 384 M270
WINDOW 0 32 2 VLeft 2
WINDOW 3 32 197 VLeft 2
SYMATTR InstName M2
SYMATTR Value Si4913DY
SYMBOL AutoGenerated\\MAX4173T 1424 -144 R0
WINDOW 3 0 62 Top 2
SYMATTR InstName U1
SYMBOL voltage 1168 -464 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName Vmain
SYMATTR Value 3.3
SYMBOL cap 1248 -112 R0
WINDOW 0 -15 54 Left 2
SYMATTR InstName C1
SYMATTR Value 10µ
SYMBOL Comparators\\LTC6752 1904 -240 R0
WINDOW 0 -48 -4 Left 2
WINDOW 3 -49 15 Left 2
SYMATTR InstName U2
SYMBOL Comparators\\LTC6752 2432 -240 R0
WINDOW 0 -36 -5 Left 2
WINDOW 3 -36 17 Left 2
SYMATTR InstName U3
SYMBOL voltage 1328 -464 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName Vhref
SYMATTR Value 2
SYMBOL voltage 1488 -464 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName Vlref
SYMATTR Value 0.1
SYMBOL load 928 560 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName I1
SYMATTR Value PWL(0 0 1 500m)
TEXT -328 872 Left 2 !.model SW SW(Ron=.02 Roff=10Meg Vt=1.7 Vh=0 Lser=10n Vser=0)
TEXT -320 816 Left 2 !.tran 0 1 0 0.05
